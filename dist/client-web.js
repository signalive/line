module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=133)}([function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e){return null==e?void 0===e?u:c:(e=Object(e),a&&a in e?i(e):s(e))}var o=n(23),i=n(83),s=n(108),c="[object Null]",u="[object Undefined]",a=o?o.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(34),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(12),i=n(40);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(94),i=n(95),s=n(96),c=n(97),u=n(98);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(10);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(92);e.exports=r},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(16),o=r(Object,"create");e.exports=o},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==c||t==u||t==s||t==a}var o=n(2),i=n(0),s="[object AsyncFunction]",c="[object Function]",u="[object GeneratorFunction]",a="[object Proxy]";e.exports=r},function(e,t){"use strict";function n(e,t,n){this.name="LineError",this.message=t,this.code=e,this.payload=n,this.stack=(new Error).stack}n.prototype=new Error,e.exports=n},function(e,t,n){var r=n(27),o=n(31),i=n(32),s=n(4),c=n(8),u=n(18),a=Object.prototype,f=a.hasOwnProperty,l=i(function(e,t){if(c(t)||s(t))return void o(t,u(t),e);for(var n in t)f.call(t,n)&&r(e,n,t[n])});e.exports=l},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(33);e.exports=r},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(66),i=n(84);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e){return s(e)?o(e):i(e)}var o=n(25),i=n(68),s=n(4);e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,configurable:!1,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,configurable:!1,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=60)}([function(e,t,n){function r(e){return null==e?void 0===e?u:c:(e=Object(e),a&&a in e?i(e):s(e))}var o=n(12),i=n(42),s=n(47),c="[object Null]",u="[object Undefined]",a=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==c||t==u||t==s||t==a}var o=n(0),i=n(6),s="[object AsyncFunction]",c="[object Function]",u="[object GeneratorFunction]",a="[object Proxy]";e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(17),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(2),i=n(23);e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=n(59).nextTick,s=Function.prototype.apply,c=Array.prototype.slice,u={},a=0;t.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=a++,r=!(arguments.length<2)&&c.call(arguments,1);return u[n]=!0,i(function(){u[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(t,n(7).setImmediate,n(7).clearImmediate)},function(e,t,n){function r(e){return"number"==typeof e||i(e)&&o(e)==s}var o=n(0),i=n(1),s="[object Number]";e.exports=r},function(e,t,n){var r=n(32),o=n(15),i=n(20),s=i&&i.isRegExp,c=s?o(s):r;e.exports=c},function(e,t,n){function r(e){return"string"==typeof e||!i(e)&&s(e)&&o(e)==c}var o=n(0),i=n(3),s=n(1),c="[object String]";e.exports=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(4),o=r.Symbol;e.exports=o},function(e,t,n){function r(e,t,n){var r=e[t];c.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(14),i=n(21),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(16);e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){var r=n(41),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(11))},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){(function(e){var r=n(17),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o,c=s&&r.process,u=function(){try{return c&&c.binding("util")}catch(e){}}();e.exports=u}).call(t,n(24)(e))},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,configurable:!1,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,configurable:!1,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(10),s=n(9),c=n(2),u=n(8),a=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r(this,e),i(t))this.eventName=t;else{if(!s(t))throw new Error("Event name to be listened should be string or regex");this.eventNameRegex=t}if(!c(n))throw new Error("Handler should be a function");if(!u(o)||parseInt(o,10)!=o)throw new Error("Execute limit should be integer");this.handler=n,this.execCount=0,this.execLimit=o}return o(e,[{key:"execute",value:function(e,t){var n=this.handler.apply(e,t);return this.execCount++,this.execLimit&&this.execCount>=this.execLimit&&this.onExpire(this),n}},{key:"testRegexWith",value:function(e){var t=this.eventNameRegex;return t.test(e)}},{key:"onExpire",value:function(){}}]),e}();e.exports=a},function(e,t,n){var r=n(13),o=n(38),i=n(40),s=n(5),c=n(19),u=n(57),a=Object.prototype,f=a.hasOwnProperty,l=i(function(e,t){if(c(t)||s(t))return void o(t,u(t),e);for(var n in t)f.call(t,n)&&r(e,n,t[n])});e.exports=l},function(e,t,n){(function(t){!function(n){function r(){}function o(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function s(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?c:u)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}c(t.promise,r)}))}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void a(e);if("function"==typeof n)return void l(o(n,t),e)}e._state=1,e._value=t,a(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var p=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return s(this,new f(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var c=s.then;if("function"==typeof c)return void c.call(s,function(e){r(i,e)},n)}t[i]=s,0===--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){p(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"undefined"!=typeof e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}(this)}).call(t,n(7).setImmediate)},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function r(e,t){var n=s(e),r=!n&&i(e),f=!n&&!r&&c(e),p=!n&&!r&&!f&&a(e),d=n||r||f||p,h=d?o(e.length,String):[],v=h.length;for(var m in e)!t&&!l.call(e,m)||d&&("length"==m||f&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||h.push(m);return h}var o=n(37),i=n(54),s=n(3),c=n(55),u=n(18),a=n(56),f=Object.prototype,l=f.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e)==s}var o=n(0),i=n(1),s="[object Arguments]";e.exports=r},function(e,t,n){function r(e){if(!s(e)||i(e))return!1;var t=o(e)?h:a;return t.test(c(e))}var o=n(2),i=n(45),s=n(6),c=n(52),u=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,p=f.toString,d=l.hasOwnProperty,h=RegExp("^"+p.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e)==s}var o=n(0),i=n(1),s="[object RegExp]";e.exports=r},function(e,t,n){function r(e){return s(e)&&i(e.length)&&!!D[o(e)]}var o=n(0),i=n(23),s=n(1),c="[object Arguments]",u="[object Array]",a="[object Boolean]",f="[object Date]",l="[object Error]",p="[object Function]",d="[object Map]",h="[object Number]",v="[object Object]",m="[object RegExp]",y="[object Set]",_="[object String]",g="[object WeakMap]",E="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",O="[object Float64Array]",x="[object Int8Array]",N="[object Int16Array]",j="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]",D={};D[w]=D[O]=D[x]=D[N]=D[j]=D[T]=D[I]=D[C]=D[S]=!0,D[c]=D[u]=D[E]=D[a]=D[b]=D[f]=D[l]=D[p]=D[d]=D[h]=D[v]=D[m]=D[y]=D[_]=D[g]=!1,e.exports=r},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))c.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(19),i=n(46),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){return s(i(e,t,o),e+"")}var o=n(22),i=n(49),s=n(50);e.exports=r},function(e,t,n){var r=n(53),o=n(16),i=n(22),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=s},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e,t,n,r){var s=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var a=t[c],f=r?r(n[a],e[a],a,n,e):void 0;void 0===f&&(f=e[a]),s?i(n,a,f):o(n,a,f)}return n}var o=n(13),i=n(14);e.exports=r},function(e,t,n){var r=n(4),o=r["__core-js_shared__"];e.exports=o},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,c&&i(n[0],n[1],c)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,s)}return t})}var o=n(35),i=n(44);e.exports=r},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(31),i=n(43);e.exports=r},function(e,t,n){function r(e){var t=s.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=c.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(12),i=Object.prototype,s=i.hasOwnProperty,c=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t,n){if(!c(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&s(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(21),i=n(5),s=n(18),c=n(6);e.exports=r},function(e,t,n){function r(e){return!!i&&i in e}var o=n(39),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(48),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,c=i(r.length-t,0),u=Array(c);++s<c;)u[s]=r[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=r[s];return a[t]=n(u),o(e,this,a)}}var o=n(28),i=Math.max;e.exports=r},function(e,t,n){var r=n(36),o=n(51),i=o(r);e.exports=i},function(e,t){function n(e){var t=0,n=0;return function(){var s=i(),c=o-(s-n);if(n=s,c>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){var r=n(30),o=n(1),i=Object.prototype,s=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!c.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(4),o=n(58),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=s&&s.exports===i,u=c?r.Buffer:void 0,a=u?u.isBuffer:void 0,f=a||o;e.exports=f}).call(t,n(24)(e))},function(e,t,n){var r=n(33),o=n(15),i=n(20),s=i&&i.isTypedArray,c=s?o(s):r;e.exports=c},function(e,t,n){function r(e){return s(e)?o(e):i(e)}var o=n(29),i=n(34),s=n(5);e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){v&&d&&(v=!1,d.length?h=d.concat(h):m=-1,h.length&&c())}function c(){if(!v){var e=o(s);v=!0;for(var t=h.length;t;){for(d=h,h=[];++m<t;)d&&d[m].run();m=-1,t=h.length}d=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function a(){}var f,l,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],v=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||v||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=a,p.addListener=a,p.once=a,p.off=a,p.removeListener=a,p.removeAllListeners=a,p.emit=a,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"object"===("undefined"==typeof e?"undefined":s(e))&&"object"===("undefined"==typeof t?"undefined":s(t))&&e.toString()===t.toString()}function i(e,t){var n=[];return a(t)?n=e.filter(t):e.indexOf(t)>-1&&n.push(t),n.forEach(function(t){var n=e.indexOf(t);e.splice(n,1)}),n}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.assign=n(26),t.Promise=n(27);var u=n(3),a=n(2),f=n(8),l=n(9),p=n(10),d=n(25),h=function(){function e(){r(this,e),this.maxListeners_=e.defaultMaxListeners,this.maxRegexListeners_=e.defaultMaxRegexListeners,this.listeners_=[],this.regexListeners_=[],this.eventListeners_={}}return c(e,[{key:"addListener",value:function(e,t,n,r){var o=this;if(u(e)||u(t)){var i=function(){var r=u(e)?e:[e],i=u(t)?t:[t];return r.forEach(function(e){i.forEach(function(t){o.addListener(e,t,n)})}),{v:o}}();if("object"===("undefined"==typeof i?"undefined":s(i)))return i.v}var c=new d(e,t,n);if(c.eventName){if(this.eventListeners_[c.eventName]||(this.eventListeners_[c.eventName]=[]),this.eventListeners_[c.eventName].length>=this.maxListeners_)throw new Error("Max listener count reached for event: "+e);this.emit("newListener",e,t),r?this.eventListeners_[c.eventName].unshift(c):this.eventListeners_[c.eventName].push(c)}else if(c.eventNameRegex){if(this.regexListeners_.length>=this.maxRegexListeners_)throw new Error("Max regex listener count reached");this.emit("newListener",e,t),r?this.regexListeners_.unshift(c):this.regexListeners_.push(c)}return c.onExpire=this.removeListener_.bind(this),this.listeners_.push(c),this}},{key:"prependListener",value:function(e,t,n){return this.addListener(e,t,n,!0)}},{key:"prependOnceListener",value:function(e,t){return this.addListener(e,t,1,!0)}},{key:"prependManyListener",value:function(e,t,n){return this.addListener(e,n,t,!0)}},{key:"removeListener_",value:function(e){i(this.listeners_,e),e.eventName&&u(this.eventListeners_[e.eventName])?(i(this.eventListeners_[e.eventName],e),0==this.eventListeners_[e.eventName].length&&delete this.eventListeners_[e.eventName]):e.eventNameRegex&&i(this.regexListeners_,e),this.emit("removeListener",e.eventName||e.eventNameRegex,e.handler)}},{key:"removeAllListeners",value:function(e){var t=this;if(u(e))e.forEach(function(e){return t.removeAllListeners(e)});else if(p(e)&&u(this.eventListeners_[e])){var n=this.eventListeners_[e].slice();n.forEach(function(e){t.removeListener_(e)})}else l(e)?!function(){var n=e,r=t.regexListeners_.filter(function(e){return o(e.eventNameRegex,n)});r.forEach(function(e){return t.removeListener_(e)})}():void 0==e&&(this.removeAllListeners(this.eventNames()),this.removeAllListeners(this.regexes()));return this}},{key:"removeListener",value:function(e,t){var n=this;if(u(e)||u(t))!function(){var r=u(e)?e:[e],o=u(t)?t:[t];r.forEach(function(e){o.forEach(function(t){n.removeListener(e,t)})})}();else if(p(e)&&u(this.eventListeners_[e])){var r=this.eventListeners_[e].filter(function(e){return e.handler==t});r.forEach(function(e){return n.removeListener_(e)})}else{if(!l(e))throw new Error("Event name should be string or regex.");!function(){var r=e,i=n.regexListeners_.filter(function(e){return o(e.eventNameRegex,r)&&e.handler==t});i.forEach(function(e){return n.removeListener_(e)})}()}return this}},{key:"eventNames",value:function(){return Object.keys(this.eventListeners_)}},{key:"regexes",value:function(){return this.regexListeners_.map(function(e){return e.eventNameRegex})}},{key:"getMaxListeners",value:function(){return this.maxListeners_}},{key:"setMaxListeners",value:function(e){if(!f(e)||parseInt(e,10)!=e)throw new Error("n must be integer");return this.maxListeners_=e,this}},{key:"getMaxRegexListeners",value:function(){return this.maxRegexListeners_}},{key:"setMaxRegexListeners",value:function(e){if(!f(e)||parseInt(e,10)!=e)throw new Error("n must be integer");return this.maxRegexListeners_=e,this}},{key:"listenerCount",value:function(e){if(p(e))return this.eventListeners_[e]?this.eventListeners_[e].length:0;if(l(e))return this.regexListeners_.filter(function(t){return o(e,t.eventNameRegex)}).length;throw new Error("Event name should be string or regex.")}},{key:"listeners",value:function(e){if(p(e))return this.eventListeners_[e]?this.eventListeners_[e].map(function(e){return e.handler}):[];if(l(e))return this.regexListeners_.filter(function(t){return o(e,t.eventNameRegex)}).map(function(e){return e.handler});throw new Error("Event name should be string or regex.")}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"once",value:function(e,t){return this.addListener(e,t,1)}},{key:"many",value:function(e,t,n){return this.addListener(e,n,t)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(u(e)){var i=function(){var n=[];return e.forEach(function(e){var o=t.emit.apply(t,[e].concat(r));n=n.concat(o)}),{v:n}}();if("object"===("undefined"==typeof i?"undefined":s(i)))return i.v}else if(!p(e))throw new Error("Event name should be string");var c=[],a={name:e};if(this.eventListeners_[e]){var f=this.eventListeners_[e].slice().map(function(e){return e.execute(Object.assign({},e,{event:a}),r)});c=c.concat(f)}var l=this.regexListeners_.filter(function(t){return t.testRegexWith(e)}).map(function(e){return e.execute(Object.assign({},e,{event:a}),r)});return c=c.concat(l),c.length>0&&c}},{key:"emitAsync",value:function(){var e=this.emit.apply(this,arguments);return e?Promise.all(e):Promise.reject(new Error("No listener"))}}]),e}();h.defaultMaxListeners=10,h.defaultMaxRegexListeners=10,h.Listener=d,e.exports=h}).call(t,n(11))}])},function(e,t,n){function r(e){return"string"==typeof e||!i(e)&&s(e)&&o(e)==c}var o=n(2),i=n(11),s=n(1),c="[object String]";e.exports=r},function(e,t,n){var r=n(16),o=n(3),i=r(o,"Map");e.exports=i},function(e,t,n){var r=n(3),o=r.Symbol;e.exports=o},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function r(e,t){var n=s(e),r=!n&&i(e),f=!n&&!r&&c(e),p=!n&&!r&&!f&&a(e),d=n||r||f||p,h=d?o(e.length,String):[],v=h.length;for(var m in e)!t&&!l.call(e,m)||d&&("length"==m||f&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||h.push(m);return h}var o=n(72),i=n(38),s=n(11),c=n(39),u=n(36),a=n(41),f=Object.prototype,l=f.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}var o=n(15),i=n(10);e.exports=r},function(e,t,n){function r(e,t,n){var r=e[t];c.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(15),i=n(10),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(82),o=r();e.exports=o},function(e,t,n){function r(e,t,n,f,l){e!==t&&s(t,function(s,a){if(u(s))l||(l=new o),c(e,t,a,n,r,f,l);else{var p=f?f(e[a],s,a+"",e,t,l):void 0;void 0===p&&(p=s),i(e,a,p)}},a)}var o=n(58),i=n(26),s=n(28),c=n(70),u=n(0),a=n(42);e.exports=r},function(e,t,n){function r(e,t){return s(i(e,t,o),e+"")}var o=n(17),i=n(109),s=n(110);e.exports=r},function(e,t,n){function r(e,t,n,r){var s=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var a=t[c],f=r?r(n[a],e[a],a,n,e):void 0;void 0===f&&(f=e[a]),s?i(n,a,f):o(n,a,f)}return n}var o=n(27),i=n(15);e.exports=r},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,c&&i(n[0],n[1],c)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,s)}return t})}var o=n(30),i=n(91);e.exports=r},function(e,t,n){var r=n(16),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(132))},function(e,t,n){var r=n(37),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){var r=n(65),o=n(1),i=Object.prototype,s=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!c.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(3),o=n(125),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=s&&s.exports===i,u=c?r.Buffer:void 0,a=u?u.isBuffer:void 0,f=a||o;e.exports=f}).call(t,n(19)(e))},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){var r=n(67),o=n(73),i=n(107),s=i&&i.isTypedArray,c=s?o(s):r;e.exports=c},function(e,t,n){function r(e){return s(e)?o(e,!0):i(e)}var o=n(25),i=n(69),s=n(4);e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return s;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=a.test(e);return n||f.test(e)?l(e.slice(2),n?2:8):u.test(e)?s:+e}var o=n(0),i=n(121),s=NaN,c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt;e.exports=r},function(e,t){"use strict";e.exports={INTERNAL_ERROR:{code:4200,reason:"Internal error"},PING_FAILED:{code:4201,reason:"Ping failed"},HANDSHAKE_FAILED:{code:4202,reason:"Handshake failed"},HANDSHAKE_REJECTED:{code:4203,reason:"Handshake rejected"},DISCONNECT_TIMEOUT:{code:4204,reason:"Disconnect timeout"},DISPOSED:{code:4205,reason:"Client disposed"},UNKNOWN_ERROR:{code:4299,reason:"Unknown error"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(13),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.handler,i=void 0===o?function(){}:o,s=n.onExpire,c=void 0===s?function(){}:s,u=n.timeout,a=void 0===u?0:u,f=n.rejectOnExpire,l=void 0===f||f;r(this,e),this.resolve_=null,this.reject_=null,this.timeout_=null,this.timeoutDuration_=a,this.rejectOnExpire_=l,this.onExpire_=c,this.isFinished_=!1,this.promise=new Promise(function(e,n){t.resolve_=e,t.reject_=n;try{i(t)}catch(e){t.reject(e)}}),a>0&&(this.timeout_=setTimeout(this.expire.bind(this),a))}return o(e,[{key:"resolve",value:function(e){this.isFinished_||(this.isFinished_=!0,this.clearTimeout_(),this.resolve_(e))}},{key:"reject",value:function(e){this.isFinished_||(this.isFinished_=!0,this.clearTimeout_(),this.reject_(e))}},{key:"expire",value:function(){this.isFinished_=!0,this.clearTimeout_(),this.onExpire_(),this.rejectOnExpire_&&this.reject_(new i(e.ErrorCode.EXPIRED,"Timeout "+this.timeoutDuration_+" ms exceed"))}},{key:"dispose",value:function(){this.isFinished_=!0,this.clearTimeout_()}},{key:"delay",value:function(e){this.timeoutDuration_>0&&(this.clearTimeout_(),this.timeout_=setTimeout(this.expire.bind(this),e||this.timeoutDuration_))}},{key:"then",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.promise.then.apply(this.promise,t)}},{key:"catch",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.promise.catch.apply(this.promise,t)}},{key:"clearTimeout_",value:function(){this.timeout_&&(clearTimeout(this.timeout_),this.timeout_=null)}}]),e}();s.ErrorCode={EXPIRED:"dExpired"},e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{
value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(122),u=n(21),a=n(0),f=(n(12),n(129)),l=n(14),p=n(54),d=p.generateDummyId,h=n(20),v=n(13),m=function(e){function t(e){var n=e.name,i=e.payload,s=e.id,c=e.err;r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));try{JSON.stringify(i),JSON.stringify(c)}catch(e){throw new v(t.ErrorCode.INVALID_JSON,"Message payload or error must be json-friendly. Maybe circular json?")}return u.name=n,u.payload=i,u.id=s,u.err=c,u.isResponded_=!1,u}return i(t,e),s(t,null,[{key:"parse",value:function(e){try{var n=JSON.parse(e);return a(n.e)&&u(n.e.name)&&u(n.e.message)&&(n.e=l(new Error,n.e)),new t({name:n.n,payload:n.p,err:n.e,id:n.i})}catch(e){throw new v(t.ErrorCode.INVALID_JSON,"Could not parse incoming message.")}}}]),s(t,[{key:"setId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d();return this.id=e,e}},{key:"createResponse",value:function(e,n){return new t({name:"_r",payload:n,err:e,id:this.id})}},{key:"resolve",value:function(e){if(c(this.id))throw new v(t.ErrorCode.MISSING_ID,"This message could not be resolved (no id)");if(this.isResponded_)throw new v(t.ErrorCode.ALREADY_RESPONDED,"This message has already responded");try{JSON.stringify(e)}catch(e){throw new v(t.ErrorCode.INVALID_JSON,"Message must be resolved with json-friendly payload. Maybe circular json?")}this.isResponded_=!0,this.emit("resolved",e)}},{key:"reject",value:function(e){if(c(this.id))throw new v(t.ErrorCode.MISSING_ID,"This message could not be rejected (no id)");if(this.isResponded_)throw new v(t.ErrorCode.ALREADY_RESPONDED,"This message has already responded");try{JSON.stringify(e)}catch(e){throw new v(t.ErrorCode.INVALID_JSON,"Message must be resolved with json-friendly payload. Maybe circular json?")}this.isResponded_=!0,this.emit("rejected",e)}},{key:"toString",value:function(){var e={n:this.name};return c(this.payload)||(e.p=this.payload),c(this.id)||(e.i=this.id),c(this.err)||(e.e=this.err instanceof Error?l({name:this.err.name,message:this.err.message},this.err):this.err),JSON.stringify(e)}},{key:"dispose",value:function(){var e=this,t=this.eventNames();t.forEach(function(t){return e.removeAllListeners(t)})}}]),t}(h);m.Name={RESPONSE:"_r",HANDSHAKE:"_h",PING:"_p"},m.ReservedNames=f(m.Name),m.ErrorCode={INVALID_JSON:"mInvalidJson",MISSING_ID:"mMissingId",ALREADY_RESPONDED:"mAlreadyResponded"},e.exports=m},function(e,t,n){(function(r){function o(){return!("undefined"==typeof window||!window||"undefined"==typeof window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function u(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof r&&"env"in r&&(e=r.env.DEBUG),e}function a(){try{return window.localStorage}catch(e){}}t=e.exports=n(55),t.log=s,t.formatArgs=i,t.save=c,t.load=u,t.useColors=o,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(u())}).call(t,n(131))},function(e,t,n){function r(e,t,n){function r(t){var n=_,r=g;return _=g=void 0,x=t,b=e.apply(r,n)}function f(e){return x=e,w=setTimeout(d,t),N?r(e):b}function l(e){var n=e-O,r=e-x,o=t-n;return j?a(o,E-r):o}function p(e){var n=e-O,r=e-x;return void 0===O||n>=t||n<0||j&&r>=E}function d(){var e=i();return p(e)?h(e):void(w=setTimeout(d,l(e)))}function h(e){return w=void 0,T&&_?r(e):(_=g=void 0,b)}function v(){void 0!==w&&clearTimeout(w),x=0,_=O=g=w=void 0}function m(){return void 0===w?b:h(i())}function y(){var e=i(),n=p(e);if(_=arguments,g=this,O=e,n){if(void 0===w)return f(O);if(j)return w=setTimeout(d,t),r(O)}return void 0===w&&(w=setTimeout(d,t)),b}var _,g,E,b,w,O,x=0,N=!1,j=!1,T=!0;if("function"!=typeof e)throw new TypeError(c);return t=s(t)||0,o(n)&&(N=!!n.leading,j="maxWait"in n,E=j?u(s(n.maxWait)||0,t):E,T="trailing"in n?!!n.trailing:T),y.cancel=v,y.flush=m,y}var o=n(0),i=n(124),s=n(43),c="Expected a function",u=Math.max,a=Math.min;e.exports=r},function(e,t,n){var r=n(24),o=n(30),i=n(104),s=n(123),c=o(function(e){return e.push(void 0,i),r(s,void 0,e)});e.exports=c},function(e,t,n){function r(e,t){var n=c(e)?o:i;return n(e,s(t))}var o=n(60),i=n(63),s=n(75),c=n(11);e.exports=r},function(e,t,n){function r(e){return e===!0||e===!1||i(e)&&o(e)==s}var o=n(2),i=n(1),s="[object Boolean]";e.exports=r},function(e,t,n){function r(e){return"number"==typeof e&&e==o(e)}var o=n(127);e.exports=r},function(e,t,n){function r(e){return"number"==typeof e||i(e)&&o(e)==s}var o=n(2),i=n(1),s="[object Number]";e.exports=r},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return("0000"+(Math.random()*Math.pow(36,e)<<0).toString(36)).slice(-e)}n(14);e.exports={generateDummyId:r}},function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function o(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(a||r);e.diff=o,e.prev=a,e.curr=r,a=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var s=i[c];n=o.call(e,s),i.splice(c,1),c--}return n}),t.formatArgs.call(e,i);var u=n.log||t.log||console.log.bind(console);u.apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),"function"==typeof t.init&&t.init(n),n}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function c(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o.default=o,t.coerce=u,t.disable=s,t.enable=i,t.enabled=c,t.humanize=n(130),t.names=[],t.skips=[],t.formatters={};var a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(85),i=n(86),s=n(87),c=n(88),u=n(89);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(99),i=n(100),s=n(101),c=n(102),u=n(103);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(5),i=n(112),s=n(113),c=n(114),u=n(115),a=n(116);r.prototype.clear=i,r.prototype.delete=s,r.prototype.get=c,r.prototype.has=u,r.prototype.set=a,e.exports=r},function(e,t,n){var r=n(3),o=r.Uint8Array;e.exports=o},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){var r=n(0),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){var r=n(64),o=n(81),i=o(r);e.exports=i},function(e,t,n){function r(e,t){return e&&o(e,t,i)}var o=n(28),i=n(18);e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e)==s}var o=n(2),i=n(1),s="[object Arguments]";e.exports=r},function(e,t,n){function r(e){if(!s(e)||i(e))return!1;var t=o(e)?h:a;return t.test(c(e))}var o=n(12),i=n(93),s=n(0),c=n(117),u=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,p=f.toString,d=l.hasOwnProperty,h=RegExp("^"+p.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return s(e)&&i(e.length)&&!!D[o(e)]}var o=n(2),i=n(40),s=n(1),c="[object Arguments]",u="[object Array]",a="[object Boolean]",f="[object Date]",l="[object Error]",p="[object Function]",d="[object Map]",h="[object Number]",v="[object Object]",m="[object RegExp]",y="[object Set]",_="[object String]",g="[object WeakMap]",E="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",O="[object Float64Array]",x="[object Int8Array]",N="[object Int16Array]",j="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]",D={};D[w]=D[O]=D[x]=D[N]=D[j]=D[T]=D[I]=D[C]=D[S]=!0,D[c]=D[u]=D[E]=D[a]=D[b]=D[f]=D[l]=D[p]=D[d]=D[h]=D[v]=D[m]=D[y]=D[_]=D[g]=!1,e.exports=r},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))c.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(8),i=n(105),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){if(!o(e))return s(e);var t=i(e),n=[];for(var r in e)("constructor"!=r||!t&&u.call(e,r))&&n.push(r);return n}var o=n(0),i=n(8),s=n(106),c=Object.prototype,u=c.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,_,g,E){var b=e[n],w=t[n],O=E.get(w);if(O)return void o(e,n,O);var x=g?g(b,w,n+"",e,t,E):void 0,N=void 0===x;if(N){var j=f(w),T=!j&&p(w),I=!j&&!T&&m(w);x=w,j||T||I?f(b)?x=b:l(b)?x=c(b):T?(N=!1,x=i(w,!0)):I?(N=!1,x=s(w,!0)):x=[]:v(w)||a(w)?(x=b,a(b)?x=y(b):(!h(b)||r&&d(b))&&(x=u(w))):N=!1}N&&(E.set(w,x),_(x,w,r,g,E),E.delete(w)),o(e,n,x)}var o=n(26),i=n(77),s=n(78),c=n(79),u=n(90),a=n(38),f=n(11),l=n(119),p=n(39),d=n(12),h=n(0),v=n(120),m=n(41),y=n(128);e.exports=r},function(e,t,n){var r=n(118),o=n(33),i=n(17),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=s},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e,t){return o(t,function(t){return e[t]})}var o=n(61);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:o}var o=n(17);e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(59);e.exports=r},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}var o=n(3),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=s&&s.exports===i,u=c?o.Buffer:void 0,a=u?u.allocUnsafe:void 0;e.exports=r}).call(t,n(19)(e))},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(76);e.exports=r},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){var r=n(3),o=r["__core-js_shared__"];e.exports=o},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!o(n))return e(n,r);for(var i=n.length,s=t?i:-1,c=Object(n);(t?s--:++s<i)&&r(c[s],s,c)!==!1;);return n}}var o=n(4);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),c=s.length;c--;){var u=s[e?c:++o];if(n(i[u],u,i)===!1)break}return t}}e.exports=n},function(e,t,n){function r(e){var t=s.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=c.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(23),i=Object.prototype,s=i.hasOwnProperty,c=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(9);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===i?void 0:n}return c.call(t,e)?t[e]:void 0}var o=n(9),i="__lodash_hash_undefined__",s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(9),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?i:t,this}var o=n(9),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||s(e)?{}:o(i(e))}var o=n(62),i=n(35),s=n(8);e.exports=r},function(e,t,n){function r(e,t,n){if(!c(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&s(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(10),i=n(4),s=n(36),c=n(0);e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!i&&i in e}var o=n(80),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():s.call(t,n,1),--this.size,!0}var o=n(6),i=Array.prototype,s=i.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(6);e.exports=r},function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(6);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(6);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=n(56),i=n(5),s=n(22);e.exports=r},function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(7);e.exports=r},function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(7);e.exports=r},function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(7);e.exports=r},function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(7);e.exports=r},function(e,t,n){function r(e,t,n,s,c,u){return i(e)&&i(t)&&(u.set(t,e),o(e,t,void 0,r,u),u.delete(t)),e}var o=n(29),i=n(0);e.exports=r},function(e,t,n){var r=n(37),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){(function(e){var r=n(34),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o,c=s&&r.process,u=function(){try{return c&&c.binding("util")}catch(e){}}();e.exports=u}).call(t,n(19)(e))},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,c=i(r.length-t,0),u=Array(c);++s<c;)u[s]=r[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=r[s];return a[t]=n(u),o(e,this,a)}}var o=n(24),i=Math.max;e.exports=r},function(e,t,n){var r=n(71),o=n(111),i=o(r);e.exports=i},function(e,t){function n(e){var t=0,n=0;return function(){var s=i(),c=o-(s-n);if(n=s,c>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(5);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<c-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(e,t),this.size=n.size,this}var o=n(5),i=n(22),s=n(57),c=200;e.exports=r},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){function r(e){return i(e)&&o(e)}var o=n(4),i=n(1);e.exports=r},function(e,t,n){function r(e){if(!s(e)||o(e)!=c)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&f.call(n)==p}var o=n(2),i=n(35),s=n(1),c="[object Object]",u=Function.prototype,a=Object.prototype,f=u.toString,l=a.hasOwnProperty,p=f.call(Object);e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==s}var o=n(2),i=n(1),s="[object Symbol]";e.exports=r},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t,n){var r=n(29),o=n(32),i=o(function(e,t,n,o){r(e,t,n,o)});e.exports=i},function(e,t,n){var r=n(3),o=function(){return r.Date.now()};e.exports=o},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=o(e),e===i||e===-i){var t=e<0?-1:1;return t*s}return e===e?e:0}var o=n(43),i=1/0,s=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(126);e.exports=r},function(e,t,n){function r(e){return o(e,i(e))}var o=n(31),i=n(42);e.exports=r},function(e,t,n){function r(e){return null==e?[]:o(e,i(e))}var o=n(74),i=n(18);e.exports=r},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=a?Math.round(e/a)+"d":e>=u?Math.round(e/u)+"h":e>=c?Math.round(e/c)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,a,"day")||i(e,u,"hour")||i(e,c,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,c=60*s,u=60*c,a=24*u,f=365.25*a;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return n(e);if("number"===i&&isNaN(e)===!1)return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){v&&d&&(v=!1,d.length?h=d.concat(h):m=-1,h.length&&c())}function c(){if(!v){var e=o(s);v=!0;for(var t=h.length;t;){for(d=h,h=[];++m<t;)d&&d[m].run();m=-1,t=h.length}d=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function a(){}var f,l,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],v=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||v||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=a,p.addListener=a,p.once=a,p.off=a,p.removeListener=a,p.removeAllListeners=a,p.emit=a,p.prependListener=a,p.prependOnceListener=a,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(46),u=n(20),a=n(45),f=(n(14),n(50)),l=n(48),p=n(0),d=n(51),h=n(21),v=n(53),m=n(52),y=n(49),_=n(47)("line:client"),g=n(13),E=n(44),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!h(e)||0==e.trim().length)throw new g(t.ErrorCode.INVALID_OPTIONS,"Url parameter must be string and cannot be empty");if(!p(n))throw new g(t.ErrorCode.INVALID_OPTIONS,"Options parameter must be an object");if(i.url=e.trim(),i.urlFollowed=null,i.options=y(n,{handshake:{timeout:3e4,payload:void 0},responseTimeout:1e4,disconnectTimeout:5e3,pingInterval:2e4,reconnect:!0,reconnectOptions:{initialDelay:1e3,multiply:1.5,maxDelay:3e4,randomness:.5},uptime:!1,uptimeOptions:{interval:5e3,window:3e5},followRedirections:!1}),!p(i.options.handshake))throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.handshake" must be an object');if(!m(i.options.handshake.timeout)||i.options.handshake.timeout<0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.handshake.timeout" must be a positive integer or zero');try{JSON.stringify(i.options.handshake.payload)}catch(e){throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.handshake.payload" must be json friendly, probably circular dependency?')}if(!m(i.options.responseTimeout)||i.options.responseTimeout<0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.responseTimeout" must be a positive integer or zero');if(!m(i.options.disconnectTimeout)||i.options.disconnectTimeout<0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.disconnectTimeout" must be a positive integer or zero');if(!m(i.options.pingInterval)||i.options.pingInterval<0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.pingInterval" must be a positive integer or zero');if(!d(i.options.reconnect))throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnect" must be a boolean');if(!p(i.options.reconnectOptions))throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnectOptions" must be an object');if(!m(i.options.reconnectOptions.initialDelay)||i.options.reconnectOptions.initialDelay<=0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnectOptions.initialDelay" must be a positive integer');if(!v(i.options.reconnectOptions.multiply)||i.options.reconnectOptions.multiply<1)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnectOptions.multiply" must be a number >= 1');if(!m(i.options.reconnectOptions.maxDelay)||i.options.reconnectOptions.maxDelay<=0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnectOptions.maxDelay" must be a positive integer');if(i.options.reconnectOptions.maxDelay<i.options.reconnectOptions.initialDelay)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnectOptions.maxDelay" must be a greater than initial delay');if(!v(i.options.reconnectOptions.randomness)||i.options.reconnectOptions.randomness<0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.reconnectOptions.randomness" must be a positive number or zero');if(!d(i.options.uptime))throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.uptime" must be a boolean');if(!p(i.options.uptimeOptions))throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.uptimeOptions" must be an object');if(!m(i.options.uptimeOptions.interval)||i.options.uptimeOptions.interval<=0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.uptimeOptions.interval" must be a positive integer');if(!m(i.options.uptimeOptions.window)||i.options.uptimeOptions.window<=0)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.uptimeOptions.window" must be a positive integer');if(i.options.uptimeOptions.window<i.options.uptimeOptions.interval)throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.uptimeOptions.window" must be a greater than interval');if(!d(i.options.followRedirections))throw new g(t.ErrorCode.INVALID_OPTIONS,'"options.followRedirections" must be a boolean');return i.ws_=null,i.id=null,i.state=t.State.READY,i.reconnectState_={disabled:!1,attempt:0,timeout:null},i.deferreds_={},i.disconnectTimeout_=null,i.uptimeBuffer_=[],i.uptimeBufferLength_=Math.round(i.options.uptimeOptions.window/i.options.uptimeOptions.interval),i.uptimeInterval_=n.uptime?setInterval(i.uptimeTick_.bind(i),i.options.uptimeOptions.interval):null,i.autoPing_=l(function(){}),i.options.pingInterval>0&&(i.autoPing_=l(function(){i.ping().then(function(){i.options.pingInterval>0&&i.state==t.State.CONNECTED&&i.autoPing_()}).catch(function(){})},i.options.pingInterval)),i}return i(t,e),s(t,[{key:"connect",value:function(){switch(this.state){case t.State.DISCONNECTED:case t.State.READY:var e=this.url;this.options.followRedirections&&this.urlFollowed&&(e=this.urlFollowed,_('Following redirection "'+this.url+'" -> "'+this.urlFollowed+'"')),_('Connecting to "'+e+'" ...');try{return this.reconnectState_.disabled=!1,this.ws_=new WebSocket(e),this.bindEvents_(),this.state=t.State.CONNECTING,this.emit(t.Event.CONNECTING),!0}catch(e){throw new g(t.ErrorCode.WEBSOCKET_ERROR,"Native websocket error. Invalid url or security error",e)}default:return _('Ignoring connect() call, client is in "'+this.state+'" state'),!1}}},{key:"connectAsync",value:function(){var e=this;return new Promise(function(n,r){e.connect();var o=function(){},i=function(e){o(),r(e)},s=function(e){o(),n(e)},c=function(e){o(),r(new g(t.ErrorCode.DISCONNECTED,"Client disconnected",e))};o=function(){e.removeListener(t.Event.CONNECTING_ERROR,i),e.removeListener(t.Event.CONNECTED,s),e.removeListener(t.Event.DISCONNECTED,c)},e.once(t.Event.CONNECTING_ERROR,i),e.once(t.Event.CONNECTED,s),e.once(t.Event.DISCONNECTED,c)})}},{key:"disconnect",value:function(e,n,r){var o=this;switch(this.state){case t.State.CONNECTING:case t.State.HANDSHAKING:case t.State.CONNECTED:_("Disconnecting... (State: "+this.state+")");try{return this.ws_.close(e||1e3,n),_("Websocket is closed"),this.reconnectState_.disabled=!r,this.rejectAllDeferreds_(new g(t.ErrorCode.DISCONNECTED,"Disconnect procedure started")),this.autoPing_.cancel(),this.disconnectTimeout_&&clearTimeout(this.disconnectTimeout_),this.options.disconnectTimeout&&(this.disconnectTimeout_=setTimeout(function(){_("Disconnect timeout exceeded, force disconnecting..."),o.emit(t.Event.ERROR,new g(t.ErrorCode.DISCONNECT_TIMEOUT,"Disconnect timeout exceeded, force disconnecting...")),o.onClose_(E.DISCONNECT_TIMEOUT),clearTimeout(o.disconnectTimeout_)},this.options.disconnectTimeout)),this.state=t.State.DISCONNECTING,this.emit(t.Event.DISCONNECTING),!0}catch(e){throw new g(t.ErrorCode.WEBSOCKET_ERROR,"Could not disconnect. Invalid code or reason, check payload.",e)}default:return _('Ignoring disconnect() call, client is in "'+this.state+'" state.'),!1}}},{key:"disconnectAsync",value:function(e,n,r){var o=this;return new Promise(function(i,s){o.disconnect(e,n,r);var c=function(e){i(e)};o.once(t.Event.DISCONNECTED,c)})}},{key:"bindEvents_",value:function(){_("Binding native event handlers."),this.ws_.onopen=this.onOpen_.bind(this),this.ws_.onclose=this.onClose_.bind(this),this.ws_.onerror=this.onError_.bind(this),this.ws_.onmessage=this.onMessage_.bind(this)}},{key:"unBindEvents_",value:function(){this.ws_&&(_("Unbinding native event handlers."),this.ws_.onopen=function(){},this.ws_.onclose=function(){},this.ws_.onerror=function(){},this.ws_.onmessage=function(){})}},{key:"onOpen_",value:function(){var e=this;_('Native "open" event received, starting handshake process'),this.state=t.State.HANDSHAKING;var n=new c({name:c.Name.HANDSHAKE,payload:this.options.handshake.payload});this.send_(n,this.options.handshake.timeout).then(function(n){return p(n)?(_("Handshake successful."),e.resetReconnectState_(),e.id=n.id,e.state=t.State.CONNECTED,e.autoPing_(),_('Emitting "connected" event...'),void e.emit(t.Event.CONNECTED,n.payload)):(_("Unexpected handshake response!?"),e.emit(t.Event.CONNECTING_ERROR,new g(t.ErrorCode.HANDSHAKE_ERROR,"Handshake response is not object. Aborting handshake...",n)),void e.disconnect(E.HANDSHAKE_FAILED.code,"Handshake failed, unexpected handshake response.",!0))}).catch(function(n){if(n instanceof g)switch(n.code){case t.ErrorCode.DISCONNECTED:return _("Handshake failed, connection lost (disconnected)"),void e.emit(t.Event.CONNECTING_ERROR,new g(t.ErrorCode.HANDSHAKE_ERROR,"Connection lost during handshake."));case t.ErrorCode.MESSAGE_TIMEOUT:return _("Handshake failed, message timeout"),e.emit(t.Event.CONNECTING_ERROR,new g(t.ErrorCode.HANDSHAKE_ERROR,"Handshake failed, request timeout.")),e.disconnect(E.HANDSHAKE_FAILED.code,"Handshake failed, request timeout.",!0);case t.ErrorCode.MESSAGE_REJECTED:return _("Handshake REJECTED!"),e.emit(t.Event.CONNECTING_ERROR,new g(t.ErrorCode.HANDSHAKE_REJECTED,"Handshake rejected, check payload for further details.",n&&n.payload)),e.disconnect(E.HANDSHAKE_REJECTED.code,"Handshake rejected",!0);case t.ErrorCode.WEBSOCKET_ERROR:return _("Handshake failed, native websocket error"),e.emit(t.Event.CONNECTING_ERROR,new g(t.ErrorCode.HANDSHAKE_ERROR,"Handshake failed. Websocket protocol error, check payload.",n&&n.payload)),e.disconnect(E.HANDSHAKE_FAILED.code,"Handshake failed, native websocket error",!0);default:return _("Handshake failed, unknown line error",n),e.disconnect(E.HANDSHAKE_FAILED.code,"Unknown line error",!0);
}return _("Handshake failed, unknown error",n),e.disconnect(E.HANDSHAKE_FAILED.code,"Unknown error",!0)})}},{key:"onClose_",value:function(e){var n=this;if(_('Native "close" event received in "'+this.state+'" state (code: '+e.code+", reason: "+e.reason+")"),this.disconnectTimeout_&&clearTimeout(this.disconnectTimeout_),this.rejectAllDeferreds_(new g(t.ErrorCode.DISCONNECTED,"Client is disconnected")),this.unBindEvents_(),this.autoPing_.cancel(),this.id=null,this.ws_=null,_('Emitting "disconnected" event...'),this.state=t.State.DISCONNECTED,this.emit(t.Event.DISCONNECTED,e),this.options.reconnect&&!this.reconnectState_.disabled){var r=this.options.reconnectOptions.initialDelay*Math.max(this.options.reconnectOptions.multiply*this.reconnectState_.attempt,1);r=Math.min(r,this.options.reconnectOptions.maxDelay),r+=Math.round(Math.random()*this.options.reconnectOptions.randomness*r),_("Will try to reconnect in "+r+" ms"),this.reconnectState_.timeout&&clearTimeout(this.reconnectState_.timeout),this.reconnectState_.timeout=setTimeout(function(){n.reconnectState_.attempt++,n.connect()},r)}}},{key:"onError_",value:function(e){var n=this;_('Native "error" event received in "'+this.state+'" state.');var r=t.Event.ERROR;if(this.state!=t.State.CONNECTING&&this.state!=t.State.HANDSHAKING||(r=t.Event.CONNECTING_ERROR),this.emit(r,new g(t.ErrorCode.WEBSOCKET_ERROR,"Native websocket error occured, check payload.",e)),this.options.followRedirections){_("Attempting to follow redirections...");var o=t.ws2http(this.url);o?(_('Making a request to "'+o+'" for following'),t.fetchResponseUrl(o).then(function(e){var r=t.http2ws(e);return r?void(n.urlFollowed!=r&&(_('Updating followed url to "'+r+'"'),n.urlFollowed=r)):_('Could not convert http url "'+e+'" to ws')}).catch(function(e){return _("Could not follow redirection, ignoring...",e)})):_("Could not convert ws url to http")}}},{key:"onMessage_",value:function(e){_('Native "message" event received in "'+this.state+'" state.');var n=void 0;this.state==t.State.CONNECTED&&this.autoPing_();try{n=c.parse(e.data)}catch(n){return _("Could not parse message",e.data),void this.emit(t.Event.ERROR,new g(t.ErrorCode.INVALID_JSON,"Could not parse incoming message, invalid json. Check payload for incoming data.",e.data))}n.name==c.Name.PING?this.onPingMessage_(n):n.name==c.Name.RESPONSE?this.onResponseMessage_(n):c.ReservedNames.indexOf(n.name)==-1?n.id?this.onMessageWithResponse_(n):this.onMessageWithoutResponse_(n):_("Could not route the message",n)}},{key:"onPingMessage_",value:function(e){_('Ping received, responding "pong"...'),this.sendWithoutResponse_(e.createResponse(null,"pong")).catch(function(e){return _("Ping response failed to send back, ignoring for now...",e)})}},{key:"onResponseMessage_",value:function(e){var n=this.deferreds_[e.id];return n?(_('Message response arrived: name="'+e.name+'" id="'+e.id+'"'),e.err?n.reject(new g(t.ErrorCode.MESSAGE_REJECTED,"Message is rejected by server, check payload.",e.err)):n.resolve(e.payload),void delete this.deferreds_[e.id]):_('Unknown message response, ignoring... (name="'+e.name+'" id="'+e.id+'")')}},{key:"onMessageWithoutResponse_",value:function(e){_('Message without response: name="'+e.name+'"'),this.emit(e.name,e)}},{key:"onMessageWithResponse_",value:function(e){var n=this;_('Message with response: name="'+e.name+'" id="'+e.id+'"'),e.once("resolved",function(r){_('Client resolving: name="'+e.name+'" id="'+e.id+'"'),n.sendWithoutResponse_(e.createResponse(null,r)).catch(function(r){n.emit(t.Event.ERROR,new g(t.ErrorCode.MESSAGE_NOT_RESPONDED,'Message (name="'+e.name+'" id="'+e.id+'") could not responded (resolve)',r))}).then(function(){return e.dispose()})}),e.once("rejected",function(r){_('Client rejecting: name="'+e.name+'" id="'+e.id+'"'),n.sendWithoutResponse_(e.createResponse(r)).catch(function(r){n.emit(t.Event.ERROR,new g(t.ErrorCode.MESSAGE_NOT_RESPONDED,'Message (name="'+e.name+'" id="'+e.id+'") could not responded (reject)',r))}).then(function(){return e.dispose()})}),this.emit(e.name,e)}},{key:"send",value:function(e,n,r){if(this.state!=t.State.CONNECTED)return Promise.reject(new g(t.ErrorCode.DISCONNECTED,"Could not send message, client is not connected."));try{var o=new c({name:e,payload:n});return this.send_(o,r)}catch(e){return Promise.reject(new g(t.ErrorCode.INVALID_JSON,'Could not send message, "payload" stringify error. Probably circular json issue.'))}}},{key:"sendWithoutResponse",value:function(e,n){if(this.state!=t.State.CONNECTED)return Promise.reject(new g(t.ErrorCode.DISCONNECTED,"Could not send message, client is not connected."));try{var r=new c({name:e,payload:n});return this.sendWithoutResponse_(r)}catch(e){return Promise.reject(new g(t.ErrorCode.INVALID_JSON,'Could not send message, "payload" stringify error. Probably circular json issue.'))}}},{key:"send_",value:function(e,n){var r=this,o=m(n)&&n>=0?n:this.options.responseTimeout;e.setId();var i=this.deferreds_[e.id]=new a({onExpire:function(){delete r.deferreds_[e.id]},timeout:o});return this.sendWithoutResponse_(e).then(function(){return i}).catch(function(e){if(i.dispose(),e instanceof g&&e.code==a.ErrorCode.EXPIRED)throw new g(t.ErrorCode.MESSAGE_TIMEOUT,"Message timeout! Its response did not recived after "+o+" ms");throw e})}},{key:"sendWithoutResponse_",value:function(e){var n=this;return this.ws_&&1==this.ws_.readyState?new Promise(function(r,o){var i=e.toString();try{_("Sending message: "+i),n.ws_.send(i),r()}catch(e){o(new g(t.ErrorCode.WEBSOCKET_ERROR,"Could not send message. Either socket is not connected or syntax error, check payload.",e))}}):Promise.reject(new g(t.ErrorCode.DISCONNECTED,"Could not send message, there is no open connection."))}},{key:"ping",value:function(){var e=this,n=this.ws_;return _("Pinging..."),this.send_(new c({name:c.Name.PING})).catch(function(r){if(e.ws_!=n)return void _("Auto-ping failed, but socket is also changed, dismissing...");throw _("Auto-ping failed, manually disconnecting..."),e.disconnect(E.PING_FAILED.code,"Auto ping failed",!0),new g(t.ErrorCode.PING_ERROR,"Ping failed, disconnecting...",r)})}},{key:"uptimeTick_",value:function(){_("Uptime Tick"),this.uptimeBuffer_.push(this.state==t.State.CONNECTED),this.uptimeBuffer_.length>this.uptimeBufferLength_&&this.uptimeBuffer_.splice(0,this.uptimeBufferLength_-this.uptimeBuffer_.length)}},{key:"getUptime",value:function(){if(this.options.uptime)return 0==this.uptimeBuffer_.length?0:this.uptimeBuffer_.filter(function(e){return e}).length/this.uptimeBuffer_.length}},{key:"dispose",value:function(){var e=this;return new Promise(function(n){switch(_("Disposing..."),e.state){case t.State.CONNECTING:case t.State.HANDSHAKING:case t.State.CONNECTED:e.once(t.Event.DISCONNECTED,function(){e.removeAllListeners(),e.uptimeBuffer_=[],e.uptimeInterval_&&clearInterval(e.uptimeInterval_),_("Disposed!"),n()}),e.disconnect(E.DISPOSED.code,E.DISPOSED.reason);break;case t.State.READY:case t.State.DISCONNECTING:case t.State.DISCONNECTED:e.resetReconnectState_(),e.removeAllListeners(),e.uptimeBuffer_=[],e.uptimeInterval_&&clearInterval(e.uptimeInterval_),_("Disposed!"),n()}})}},{key:"rejectAllDeferreds_",value:function(e){f(this.deferreds_,function(t){return t.reject(e)}),this.deferreds_={}}},{key:"resetReconnectState_",value:function(){_("Resetting reconnection state..."),this.reconnectState_.timeout&&clearTimeout(this.reconnectState_.timeout),this.reconnectState_={disabled:!1,attempt:0,timeout:null}}}]),t}(u);b.ws2http=function(e){var t=void 0,n={"ws://":"http://","wss://":"https://"};return f(n,function(n,r){0==e.indexOf(r)&&(t=n+e.substr(r.length))}),t},b.http2ws=function(e){var t=void 0,n={"http://":"ws://","https://":"wss://"};return f(n,function(n,r){0==e.indexOf(r)&&(t=n+e.substr(r.length))}),t},b.fetchResponseUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return new a({timeout:t,handler:function(t){var n=new XMLHttpRequest;n.addEventListener("error",function(){return t.reject(new Error("Native XMLHttpRequest error"))}),n.addEventListener("abort",function(){return t.reject(new Error("Aborted XMLHttpRequest"))}),n.addEventListener("load",function(){return t.resolve(n.responseURL)}),n.open("HEAD",e);try{n.send()}catch(e){t.reject(e)}}})},b.Message=c,b.Error=g,b.ErrorCode={INVALID_OPTIONS:"cInvalidOptions",INVALID_JSON:"cInvalidJSON",HANDSHAKE_ERROR:"cHandshakeError",HANDSHAKE_REJECTED:"cHandshakeRejected",MESSAGE_TIMEOUT:"cMessageTimeout",MESSAGE_REJECTED:"cMessageRejected",MESSAGE_NOT_RESPONDED:"cMessageNotResponded",WEBSOCKET_ERROR:"cWebsocketError",DISCONNECT_TIMEOUT:"cDisconnectError",PING_ERROR:"cPingError",DISCONNECTED:"cDisconnected"},b.State={READY:"ready",CONNECTING:"connecting",HANDSHAKING:"handshaking",CONNECTED:"connected",DISCONNECTING:"disconnecting",DISCONNECTED:"disconnected"},b.Event={CONNECTING:"_connecting",CONNECTING_ERROR:"_connecting_error",CONNECTED:"_connected",DISCONNECTING:"_disconnecting",DISCONNECTED:"_disconnected",ERROR:"_error"},e.exports=b}]);
//# sourceMappingURL=client-web.js.map